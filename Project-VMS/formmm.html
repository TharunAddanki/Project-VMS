<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>User Accounts Form — PowerSchool Style</title>
<style>
  :root{
    --bg-1: #e0f2ff;        /* soft sky */
    --bg-2: #fff0f6;        /* soft blush */
    --card: rgba(255,255,255,0.95);
    --muted: #55606a;
    --ink: #1f2a37;
    --accent-1: #66c2d9;    /* pastel teal */
    --accent-2: #a38be6;    /* pastel purple */
    --accent-3: #ffd59e;    /* soft peach */
    --glass-border: rgba(255,255,255,0.6);
    --radius: 14px;
    --gap: 18px;
    --maxw: 1100px;
    --shadow: 0 12px 30px rgba(33,40,50,0.08);
    --ease: cubic-bezier(.2,.9,.23,1);
  }

  *{box-sizing:border-box;font-family:Inter, "Segoe UI", Roboto, system-ui, -apple-system;}
  html,body{height:100%;margin:0;background:linear-gradient(120deg,var(--bg-1),var(--bg-2));-webkit-font-smoothing:antialiased;color:var(--ink);}

  .page{
    max-width:var(--maxw);
    margin:36px auto;
    padding:26px;
    display:grid;
    grid-template-columns: 1fr 450px;
    gap:28px;
  }

  @media (max-width:980px){
    .page{grid-template-columns:1fr;padding:18px;}
  }

  .card{
    background:var(--card);
    border-radius:var(--radius);
    padding:22px;
    box-shadow:var(--shadow);
    border:1px solid var(--glass-border);
    transition:transform .18s var(--ease);
  }
  .card:hover{transform:translateY(-4px);}

  header.form-head{
    display:flex;
    gap:14px;
    align-items:center;
    margin-bottom:14px;
  }
  .logo-wrap{
    width:86px;height:86px;border-radius:12px;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.2));
    border:1px solid rgba(0,0,0,0.02); overflow:hidden;
    box-shadow:0 6px 18px rgba(9,14,20,0.04);
  }
  .logo-wrap img{max-width:78px;max-height:78px;display:block;object-fit:contain;}

  .title {display:flex;flex-direction:column;}
  .title h1{margin:0;font-size:1.15rem;color:var(--ink);letter-spacing:0.2px;}
  .title p{margin:6px 0 0;color:var(--muted);font-size:0.92rem;}

  form#theForm{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--gap);align-items:start;}
  @media (max-width:980px){ form#theForm{grid-template-columns:1fr;} }

  .field{display:flex;flex-direction:column;gap:8px;}
  .field.full{grid-column:1/ -1;}
  .field label{font-weight:600;color:var(--ink);font-size:0.9rem;}
  .field input[type="text"],
  .field input[type="email"],
  .field input[type="password"],
  .field select,
  .field textarea {
    padding:11px 12px;border-radius:10px;border:1px solid rgba(30,40,60,0.06);
    background:linear-gradient(180deg,#ffffff,#fbfeff);
    font-size:0.95rem;color:var(--ink);
    transition:box-shadow .15s var(--ease),border-color .15s var(--ease),transform .15s var(--ease);
  }
  .field textarea{min-height:110px;resize:vertical;padding-top:10px;}
  .field input:focus, .field select:focus, .field textarea:focus{
    outline:none;border-color:var(--accent-1);box-shadow:0 6px 26px rgba(102,194,217,0.12);transform:translateY(-1px);
  }

  .small {font-size:0.82rem;color:var(--muted);margin-top:6px;}
  .inline-row{display:flex;gap:10px;align-items:center;}
  .inline-row .half{flex:1;}

  .pills{display:flex;flex-wrap:wrap;gap:10px;padding-top:6px;}
  .pill{
    display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;font-weight:600;
    background:linear-gradient(180deg, rgba(163,139,230,0.12), rgba(163,139,230,0.06));
    color:var(--muted);cursor:pointer;border:1px solid rgba(163,139,230,0.06);
    user-select:none;transition:transform .12s var(--ease);
  }
  .pill input{display:none;}
  .pill:hover{transform:translateY(-2px);}

  .controls{display:flex;gap:10px;margin-top:6px;grid-column:1 / -1;}
  .btn{
    border:0;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;font-size:0.95rem;
    box-shadow:0 6px 18px rgba(9,14,20,0.04);
  }
  .btn.primary{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:white;}
  .btn.ghost{background:transparent;border:1px solid rgba(30,40,60,0.06);color:var(--ink);}
  .btn.warn{background:linear-gradient(90deg,var(--accent-3),#ffd1b3);color:var(--ink);}

  .preview-card{
    position:sticky; top:36px; align-self:start;
    padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85));
    border:1px solid rgba(0,0,0,0.03); box-shadow:0 12px 28px rgba(18,22,28,0.06);
  }
  .preview-head{display:flex;align-items:center;gap:12px;margin-bottom:12px;}
  .preview-head .logo-sm{
    width:70px;height:70px;border-radius:10px;overflow:hidden;
    display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#fff,#f7fbff);
  }
  .preview-head .logo-sm img{max-width:64px;max-height:64px;object-fit:contain;}
  .preview-head h3{margin:0;font-size:1.05rem;color:var(--ink);}
  .preview-block{background:linear-gradient(180deg,#fbfdff,#ffffff);padding:12px;border-radius:10px;border:1px solid rgba(30,40,60,0.03);}
  .kv{display:flex;justify-content:space-between;gap:12px;padding:8px 0;border-bottom:1px dashed rgba(20,30,40,0.03);}
  .kv:last-child{border-bottom:0;}
  .k{color:var(--muted);font-weight:700;}
  .v{color:var(--ink);text-align:right;max-width:60%;white-space:pre-wrap;word-break:break-word;}
  .note{font-size:0.86rem;color:var(--muted);margin-top:8px;}
  .toast{
    position:fixed;right:20px;bottom:20px;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:white;padding:12px 16px;border-radius:12px;font-weight:700;box-shadow:0 12px 30px rgba(14,22,36,0.2);display:none;
  }
</style>
</head>
<body>
  <div class="page">

    <!-- LEFT: FORM -->
    <section class="card" aria-labelledby="formTitle">
      <header class="form-head">
        <div class="logo-wrap" aria-hidden="true">
          <img id="topLogo" src="https://www.powerschool.com/wp-content/uploads/2022/01/powerschool-social-thumb.png" alt="PowerSchool logo"/>
        </div>
        <div class="title">
          <h1 id="formTitle">AtrieveERP - User Account Request</h1>
          <p class="small">Complete the form below. Preview updates live to the right. Fields marked * are required.</p>
        </div>
      </header>

      <form id="theForm" autocomplete="off" novalidate>
        <div class="field">
          <label for="newOrChanged">New or Changed *</label>
          <select id="newOrChanged" name="newOrChanged" required>
            <option value="">Select action</option>
            <option>New</option>
            <option>Changed</option>
            <option>Deactivation</option>
          </select>
        </div>

        <div class="field">
          <label for="fullName">Employee Number *</label>
          <input id="fullName" name="fullName" type="text" placeholder="" required />
        </div>

        <div class="field">
          <label for="username">Username</label>
          <input id="username" name="username" type="text" placeholder="e.g., jdoe" />
        </div>

        <div class="field">
          <label for="copyFrom">AtrieveERP account to copy from</label>
          <input id="copyFrom" name="copyFrom" type="text" placeholder="Optional — e.g., jsmith" />
        </div>

        <div class="field">
          <label for="locOld">Location — Old</label>
          <input id="locOld" name="locOld" type="text" placeholder="Old location code" />
        </div>
        <div class="field">
          <label for="locNew">Location — New</label>
          <input id="locNew" name="locNew" type="text" placeholder="New location code (if changing)" />
        </div>

        <div class="field">
          <label for="authorizer">Authorizer</label>
          <input id="authorizer" name="authorizer" type="text" placeholder="Approver name" />
        </div>

        <div class="field">
          <label for="authPass">Authorizer password (if applicable)</label>
          <div class="inline-row">
            <input id="authPass" name="authPass" type="password" placeholder="Enter password" />
            <button type="button" class="btn ghost" id="toggleAuth">Show</button>
          </div>
          <div class="small">Only used when authorizer confirms locally — do not share insecurely.</div>
        </div>

        <div class="field">
          <label for="email">Email address *</label>
          <input id="email" name="email" type="email" placeholder="name@domain.com" required />
        </div>

        <div class="field full">
          <label>Access — select all that apply</label>
          <fieldset class="pills" id="accessPills" aria-label="Access options">
            <label class="pill"><input type="checkbox" name="access" value="HR"> HR</label>
            <label class="pill"><input type="checkbox" name="access" value="Finance"> Finance</label>
            <label class="pill"><input type="checkbox" name="access" value="Payroll"> Payroll</label>
            <label class="pill"><input type="checkbox" name="access" value="District"> District</label>
            <label class="pill"><input type="checkbox" name="access" value="School"> School</label>
            <label class="pill"><input type="checkbox" name="access" value="IT"> IT</label>
          </fieldset>
        </div>

        <div class="field">
          <label for="type">Type</label>
          <select id="type" name="type">
            <option value="">Select type</option>
            <option>District</option>
            <option>School</option>
            <option>Contractor</option>
            <option>Temporary</option>
          </select>
        </div>

        <div class="field">
          <label for="atreivePwd">atrieveERP Password</label>
          <div class="inline-row">
            <input id="atreivePwd" name="atreivePwd" type="password" placeholder="Preferred password (leave blank to auto-generate)">
            <button type="button" class="btn ghost" id="toggleAtrieve">Show</button>
          </div>
          <div class="small">If you leave blank, system will auto-generate a secure password.</div>
        </div>

        <div class="field">
          <label for="secBuilder">Security Builder required?</label>
          <select id="secBuilder" name="secBuilder">
            <option value="">Select</option>
            <option>Yes</option>
            <option>No</option>
          </select>
        </div>

        <div class="field full">
          <label for="additional">Additional information</label>
          <textarea id="additional" name="additional" placeholder="Any special instructions, ticket #, or notes..."></textarea>
        </div>

        <div class="controls full" role="group" aria-label="Form actions">
          <button type="button" id="downloadJson" class="btn ghost">Download JSON</button>
          <button type="button" id="downloadCsv" class="btn ghost">Download CSV</button>
          <button type="reset" id="resetBtn" class="btn warn">Reset</button>
          <button type="submit" id="submitBtn" class="btn primary">Submit Request</button>
        </div>

        <div class="note full">Tip: Use the Preview at right to confirm fields before submitting.</div>
      </form>
    </section>

    <!-- RIGHT: PREVIEW -->
    <aside class="preview-card card" aria-labelledby="previewTitle">
      <div class="preview-head">
        <div class="logo-sm"><img id="previewLogo" src="https://www.powerschool.com/wp-content/uploads/2022/01/powerschool-social-thumb.png" alt="PowerSchool logo"></div>
        <div>
          <h3 id="previewTitle">Live Preview</h3>
          <div class="small">How the request will appear in the ticket system</div>
        </div>
      </div>

      <div class="preview-block" id="previewBlock">
        <div class="kv"><div class="k">Action</div><div class="v" id="pv_action">—</div></div>
        <div class="kv"><div class="k">Full name</div><div class="v" id="pv_name">—</div></div>
        <div class="kv"><div class="k">Username</div><div class="v" id="pv_user">—</div></div>
        <div class="kv"><div class="k">Email</div><div class="v" id="pv_email">—</div></div>
        <div class="kv"><div class="k">Location (Old / New)</div><div class="v" id="pv_loc">—</div></div>
        <div class="kv"><div class="k">Access</div><div class="v" id="pv_access">—</div></div>
        <div class="kv"><div class="k">Type</div><div class="v" id="pv_type">—</div></div>
        <div class="kv"><div class="k">Security Builder</div><div class="v" id="pv_sec">—</div></div>
        <div class="kv"><div class="k">Copy from</div><div class="v" id="pv_copy">—</div></div>
        <div class="kv"><div class="k">Additional</div><div class="v" id="pv_add">—</div></div>
      </div>

      <div style="margin-top:12px;text-align:right;">
        <button id="printPreview" class="btn ghost" onclick="window.print()">Print</button>
      </div>
    </aside>

  </div>

  <div class="toast" id="toast">Submitted ✔</div>

<script>
  // JS code for preview, toggle, download, submit
  function collect() {
    const form = document.getElementById('theForm');
    const fd = new FormData(form);
    const obj = {};
    for (const [k,v] of fd.entries()){
      if (k === 'access') { obj.access = (obj.access||[]).concat(v); } 
      else { obj[k]=v; }
    }
    if(!obj.access) obj.access=[];
    return obj;
  }

  function updatePreview(){
    const data = collect();
    document.getElementById('pv_action').textContent = data.newOrChanged || '—';
    document.getElementById('pv_name').textContent = data.fullName || '—';
    document.getElementById('pv_user').textContent = data.username || '—';
    document.getElementById('pv_email').textContent = data.email || '—';
    const loc = ((data.locOld||'') + (data.locNew?(' → '+data.locNew):'')).trim() || '—';
    document.getElementById('pv_loc').textContent = loc;
    document.getElementById('pv_access').textContent = data.access.length?data.access.join(', '):'—';
    document.getElementById('pv_type').textContent = data.type || '—';
    document.getElementById('pv_sec').textContent = data.secBuilder || '—';
    document.getElementById('pv_copy').textContent = data.copyFrom || '—';
    document.getElementById('pv_add').textContent = data.additional || '—';
  }

  const form = document.getElementById('theForm');
  form.addEventListener('input', updatePreview);
  form.addEventListener('change', updatePreview);
  updatePreview();

  document.getElementById('toggleAuth').addEventListener('click',function(){
    const el=document.getElementById('authPass');
    if(el.type==='password'){ el.type='text'; this.textContent='Hide'; } else { el.type='password'; this.textContent='Show'; }
  });
  document.getElementById('toggleAtrieve').addEventListener('click',function(){
    const el=document.getElementById('atreivePwd');
    if(el.type==='password'){ el.type='text'; this.textContent='Hide'; } else { el.type='password'; this.textContent='Show'; }
  });

  document.querySelectorAll('.pill').forEach(p=>{
    p.addEventListener('click',()=>{
      const cb=p.querySelector('input[type="checkbox"]');
      cb.checked = !cb.checked;
      updatePreview();
    });
  });

  function jsonToCsv(obj){
    const headers = Object.keys(obj);
    const values = headers.map(h=>{
      let v=obj[h]; if(Array.isArray(v)) v=v.join(';');
      v=(v===undefined||v===null)?'':String(v);
      if(v.includes('"')) v=v.replace(/"/g,'""');
      if(v.includes(',')||v.includes('"')||v.includes('\n')) v=`"${v}"`;
      return v;
    });
    return headers.join(',')+'\n'+values.join(',');
  }

  document.getElementById('downloadJson').addEventListener('click',()=>{
    const data = collect();
    const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='user-request.json'; a.click(); URL.revokeObjectURL(url);
  });

  document.getElementById('downloadCsv').addEventListener('click',()=>{
    const data = collect();
    const csv = jsonToCsv(data);
    const blob = new Blob([csv], {type:'text/csv'});
    const url = URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='user-request.csv'; a.click(); URL.revokeObjectURL(url);
  });

  document.getElementById('resetBtn').addEventListener('click',()=>{ setTimeout(updatePreview,30); });

  form.addEventListener('submit',(e)=>{
    e.preventDefault();
    const data=collect();
    const errors=[];
    if(!data.newOrChanged) errors.push('Action required.');
    if(!data.fullName||data.fullName.trim().length<2) errors.push('Full name required.');
    
    if(!data.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(data.email)) errors.push('Valid email required.');
    if(errors.length){ alert('Please fix:\n'+errors.join('\n')); return; }
    const toast = document.getElementById('toast');
    toast.style.display='block';
    setTimeout(()=>{ toast.style.display='none'; },2600);
    console.log('Form submitted:', data);
  });
</script>
</body>
</html>
